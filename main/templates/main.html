{% extends 'base.html' %}
{% load static %}
{% block content %}
{% include 'navbar.html' %}
<style>
.hover-text {
    position: relative; 
    display: block;
}

.hover-text h2,
.hover-text p {
    transition: visibility 0.2s, opacity 0.2s ease;
}

.hover-text::after {
    content: attr(data-hover-text);
    position: absolute; 
    top: 0;
    left: 0;
    width: 100%;
    color: gold; 
    font-size: 1rem; 
    opacity: 0;
    visibility: hidden;
    transition: visibility 0.2s, opacity 0.2s ease;
}

.hover-text:hover h2,
.hover-text:hover p {
    opacity: 0; 
    visibility: hidden; 
}

.hover-text:hover::after {
    visibility: visible; 
    opacity: 1; 
}

.bottom-fixed {
    position: fixed;
    bottom: 0;
    width: 100%;
    background-color: #1f2937; 
    padding: 1rem;
    text-align: center;
}

.fade-out {
    opacity: 0;
    transition: opacity 0.5s ease-out;
}
footer {
    background-color: #1f2937;
    color: white;
    padding: 1rem;
    text-align: center;
}
</style>

<body class="bg-gray-800">
  <!-- Welcome message animation -->
  <div id="welcome-container"
    class="flex items-center justify-center min-h-screen bg-gray-800">
    <div id="welcome-message"
      class="fixed inset-0 flex items-center justify-center bg-white bg-opacity-5">
      <h1 class="text-6xl font-bold text-white">
        Welcome, {{ user.username }}
      </h1>
    </div>
  </div>
  <div class="mt-28">
    {% if not product_entries %}
    <div id="empty-entry-content"
      class="flex flex-col items-center justify-center min-h-screen space-y-4 hidden">
      <img src="{% static 'images/mokoudissapointed.png' %}" alt="Empty"
        class="mb-4" style="max-width: 60%; height: auto;" />
      <div id="main-content"
        class="flex flex-col hidden text-gray-300 items-center justify-center">
        <div class="flex flex-col justify-center items-center">
          <p class="text-sm text-center text-gray-300">
            No items (┬┬﹏┬┬)
          </p>
          <a href="{% url 'main:create_product' %}"
            class="font-medium text-indigo-200 hover:text-indigo-300">
            Add some here!
          </a>
        </div>
        <div>
          <footer>
            <h5>Last login session: {{ last_login }} </h5>
          </footer>
        </div>
      </div>

      {% else %}
      <!-- Main Content -->
      <div id="main-content" class="hidden text-gray-300">

        <h1
          class="text-4xl font-bold text-white text-center mt-8 mb-8">Items</h1>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4">
          {% for product_entry in product_entries %}
          {% include 'card.html' %}
          {% endfor %}

          <!-- Add product button -->
          <div class="flex justify-left items-center">
            <a href="{% url 'main:create_product' %}"
              class="bg-green-500 hover:bg-green-600 text-white rounded-lg p-3 flex items-center justify-center"
              style="width: 50px; height: 50px;">
              +
            </a>
          </div>
        </div>
        <footer>
          <h5>Last login session: {{ last_login }}</h5>
        </footer>
      </div>
      {% endif %}
    </div>
    <script>
document.addEventListener("DOMContentLoaded", function () {
    const welcomeContainer = document.getElementById("welcome-container");
    const welcomeMessage = document.getElementById("welcome-message");
    const mainContent = document.getElementById("main-content");
    const emptyEntryContent = document.getElementById("empty-entry-content");

    welcomeContainer.classList.remove("hidden");

    setTimeout(() => {
        welcomeMessage.classList.add("fade-out");

        setTimeout(() => {
            welcomeContainer.classList.add("hidden");
            welcomeMessage.classList.remove("fade-out");
            mainContent.classList.remove("hidden");
            emptyEntryContent.classList.remove("hidden");
        }, 500); 
    }, 2000); 
});

  </script>
  </body>
  {% endblock %}

  {% block meta %}
  <title>Shopkeeper</title>
  {% endblock meta %}
